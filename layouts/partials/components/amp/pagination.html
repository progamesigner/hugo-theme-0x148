{{ if gt $.Paginator.TotalPages 1 }}
    <nav class="pagination is-right" role="navigation" aria-label="pagination">
        {{ if $.Paginator.HasPrev }}
            <a class="pagination-previous" href="{{ .Paginator.Prev.URL }}" aria-label="Previous">Previous</a>
        {{ else }}
            <a class="pagination-previous" aria-label="Previous" data-disabled>Previous</a>
        {{ end }}

        {{ if $.Paginator.HasNext }}
            <a class="pagination-next" href="{{ .Paginator.Next.URL }}" aria-label="Next">Next</a>
        {{ else }}
            <a class="pagination-next" aria-label="Next" data-disabled>Next</a>
        {{ end }}

        <ul class="pagination-list">
            {{- $payload := newScratch -}}
            {{- $payload.Set "ellipsed" false -}}

            {{ range $.Paginator.Pagers }}
                {{- $show := le .PageNumber 3 | or (eq 0 (sub .TotalPages .PageNumber)) | or (2 | sub $.Paginator.PageNumber | gt .PageNumber | and (2 | add $.Paginator.PageNumber | lt .PageNumber)) -}}

                {{ if $show }}
                    {{- $payload.Set "shouldEllipse" false -}}
                    {{- $payload.Set "ellipsed" false -}}
                {{ else }}
                    {{- $payload.Set "shouldEllipse" (not ($payload.Get "ellipsed") ) -}}
                    {{- $payload.Set "ellipsed" true -}}
                {{ end }}

                <li>
                    {{ if $show }}
                        {{ if eq . $.Paginator }}
                            <a class="pagination-link is-current" href="{{ .URL }}" aria-label="Page {{ .PageNumber }}" aria-current="page">{{ .PageNumber }}</a>
                        {{ else }}
                            <a class="pagination-link" href="{{ .URL }}" aria-label="Goto page {{ .PageNumber }}">{{ .PageNumber }}</a>
                        {{ end }}
                    {{ else }}
                        <span class="pagination-ellipsis">&hellip;</span>
                    {{ end }}
                </li>
            {{ end }}
        </ul>
    </nav>
{{ end }}
